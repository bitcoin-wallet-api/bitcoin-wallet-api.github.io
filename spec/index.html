<!DOCTYPE html>
<html>
  <head>
    <title>Bitcoin Wallet API</title>
    <meta charset='utf-8'>
    <script src='http://www.w3.org/Tools/respec/respec-w3c-common'
            async class='remove'></script>
    <script class='remove'>
      var respecConfig = {
          specStatus: "unofficial",
          shortName:  "bitcoin-wallet-api",
          editors: [
                {   name:       "Yurii Rashkovskii",
                }
          ],
      };
    </script>
  </head>
  <body>
    <section id='abstract'>
      <p>
        This document describes a way to provide web applications a restricted access to user's
        Bitcoin wallets.
      </p>
    </section>

    <section id='sotd'>
    </section>

    <section id='conformance'>
    </section>

    <section class='informative'>
      <h2>Introduction</h2>

      <p>The Bitcoin Wallet API is aimed to provide a uniform, privacy-oriented, restricted access to user's Bitcoin wallets
      to enable web applications seamless integration with the Bitcoin infrastructure.</p>
      <p>The API is designed to provide the smallest possible range of functionality that would enable such
      integration. The functionality is limited to address generation, data &amp; transaction preparation & signing. Other functionality,
      such as transaction transmission, access to the blockchain, as well as bitcoin &amp; cryptographic primitives are not part of this
      proposal.</p>


      <code>
        <pre class='example highlight'>
          bitcoin.getWallet(function(w) {
            var input = w.getUTXOs(function(utxos) {
               // Uses third-party bitcore library
               var tx = new bitcore.TransactionBuilder(opts).setUnspent(utxos).setOutputs(outs).build().serialize();
               w.sign(tx, function(s) {
                 var signed = new bitcore.Transaction()
                 signed.parse(new bitcore.buffertools.Buffer(s))
                 if (signed.isComplete())
                   send(signed.serialize())
               })

            })
          })
        </pre>
      </code>

    </section>

    <section>
      <h2>Security and privacy considerations</h2>
    </section>

    <section class='informative'>
      <h2>Implementation considerations</h2>
    </section>

  </body>
</html>
